# 訂閱者管理功能指南

## 功能概述

訂閱者管理頁面現在具備以下新功能：

1. **點擊展開詳細資訊** - 點擊訂閱者卡片可展開查看完整資訊
2. **測驗答案顯示** - 在展開的區域中顯示用戶的完整測驗答案
3. **生成推薦** - 為每個訂閱者生成個人化香水推薦

## 使用方式

### 1. 查看訂閱者列表
- 進入管理後台
- 點擊「訂閱者管理」按鈕
- 系統會自動載入所有訂閱者資料

### 2. 展開詳細資訊
- 點擊任何訂閱者卡片（有向下箭頭圖標）
- 展開後會顯示：
  - 完整的測驗答案詳細資訊
  - 個人化推薦結果（如果已生成）

### 3. 生成推薦
- 點擊「生成推薦」按鈕（✨ 圖標）
- 系統會根據用戶的測驗答案生成個人化推薦
- 推薦結果包含：
  - 主要推薦（85% 匹配度）
  - 次要推薦（72% 匹配度）
  - 替代推薦（68% 匹配度）

## 推薦系統功能

### 推薦類型
- **主要推薦**: 最符合用戶偏好的香水
- **次要推薦**: 可嘗試的不同風格香水
- **替代推薦**: 額外的選擇選項

### 推薦內容
每個推薦包含：
- 香水名稱和品牌
- 詳細描述
- 匹配度百分比
- 推薦理由列表

## API 端點

### 生成推薦 API
```
POST /api/generate-recommendations
```

請求參數：
```json
{
  "userId": "用戶ID",
  "quizAnswers": {
    "測驗答案對象"
  }
}
```

回應格式：
```json
{
  "success": true,
  "recommendations": {
    "primary": {
      "name": "香水名稱",
      "brand": "品牌",
      "description": "描述",
      "confidence": 85,
      "reasons": ["理由1", "理由2", "理由3"]
    },
    "secondary": { ... },
    "alternative": { ... }
  },
  "generatedAt": "生成時間",
  "message": "推薦生成成功"
}
```

## 技術實現

### 前端功能
- 使用 React state 管理展開狀態
- 動態載入推薦結果
- 響應式設計支援手機和桌面

### 後端功能
- 模擬 AI 推薦系統
- 支援保存推薦結果到資料庫
- 錯誤處理和日誌記錄

## 注意事項

1. **推薦系統**: 目前使用模擬推薦，可根據需要整合真實的 AI 推薦服務
2. **資料庫**: 推薦結果會嘗試保存到 `recommendations` 表格
3. **效能**: 推薦生成可能需要幾秒鐘時間，請耐心等待
4. **錯誤處理**: 如果生成失敗，會顯示錯誤訊息

## 未來改進

1. 整合真實的 AI 推薦服務
2. 添加推薦歷史記錄
3. 支援批量生成推薦
4. 添加推薦效果追蹤
5. 優化推薦演算法

## 測試建議

1. 測試不同類型的測驗答案
2. 驗證推薦結果的合理性
3. 測試錯誤情況處理
4. 確認響應式設計在不同設備上的表現
